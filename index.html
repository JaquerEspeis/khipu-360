<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Khipu 360</title>
    <script src="https://aframe.io/releases/0.6.1/aframe.min.js"></script>
    <script src="scripts/aframe-gif-shader.js"></script>  
  </head>
  <body>
    <a-scene>
      <a-assets>
	<!-- 360 images -->
	<img id="image-rooftop" src="images/360/rooftop.jpg">
	<img id="khipukamayuq-transparent" src="images/khipukamayuq-transparent.png">
	<a-asset-item id="amulet-model" src="models/amulet/amulet_1set.glb"></a-asset-item>
	<audio id="audio1" src="audios/escena_01.mp3" preload="auto"></audio>
      </a-assets>
      <a-sky id="sky-rooftop" radius="10" src="#image-rooftop"></a-sky>
      <a-sky id="image-360-2" radius="10" src="#prueba2" opacity="0"></a-sky>
      <a-entity position="2 0 -4">
	<a-entity geometry="primitive: plane; height: 5; width: 3"
		  material="side: front; src:images/front_kkamayuq.png; transparent: true">
	</a-entity>
	<a-entity geometry="primitive: plane; height: 5; width: 3"
		  material="side: back; src: images/back_kkamayuq.png; transparent: true">
	</a-entity>
	<a-animation attribute="rotation"
		   dur="10000" fill="forwards" to="0 360 0"
		   repeat="indefinite"
	</a-animation>
      </a-entity>
      <a-entity position="-1 0 -4" geometry="primitive: plane; height: 4"
		material="shader: gif; src:url(images/wink_coni2.gif); transparent: true; autoplay: true">  
      </a-entity>
      <a-image src="#khipukamayuq-transparent" height="3" position="-3 0 3" rotation="0 30 0">
	<a-animation id="khipukamayuq-animation" attribute="position"
		     to="-3 1 -5" dur="10000">
	</a-animation>
        <a-entity id="amulet" gltf-model="#amulet-model"
		  position="0 0 0.5" scale="0.2 0.2 0.2" rotation="90 210 180"
		  visible="false">
          <a-animation attribute="visible" to="true"
		       begin="khipukamayuqVisible">
	  </a-animation>
	</a-entity>
      </a-image>
      <a-entity sound="src: #audio1; autoplay: true"></a-entity>
      <a-camera wasd-controls-enabled="true">
        <a-cursor id="cursor">
          <a-animation begin="click" easing="ease-in"
		       attribute="scale" fill="backwards"
		       from="0.1 0.1 0.1" to="1 1 1" dur="150">
	  </a-animation>
          <a-animation begin="cursor-fusing" easing="ease-in"
		       attribute="scale" from="1 1 1" to="0.1 0.1 0.1"
		       dur="1500">
	  </a-animation>
        </a-cursor>
      </a-camera>
    </a-scene>
    <script src="scripts/controller.js"></script>    
  </body>
</html>
