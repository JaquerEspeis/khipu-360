<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Khipu 360</title>
    <script src="https://aframe.io/releases/0.6.1/aframe.min.js"></script>
    <script src="scripts/aframe-gif-shader.js"></script>
    <script src="scripts/glow.js"></script>
  </head>
  <body>
    <a-scene>
      <a-assets>
	<!-- Intro. -->
	<img id="img-headphones" src="images/intro/headphones.png">	
	<img id="img-cardboard" src="images/intro/cardboard.png">
	<img id="img-rotation" src="images/intro/rotation.png">
	<img id="img-intro1" src="images/intro/intro1.jpg">
	<img id="img-intro2" src="images/intro/intro2.jpg">
	<img id="img-intro3" src="images/intro/intro3.jpg">	
	<!-- Videos. -->
	<video id="video-scene1" src="videos/scene1.mp4"></video>
	<!-- 360 images. -->
	<img id="img-medialab" src="images/360/medialab.jpg">
	<img id="img-rooftop" src="images/360/rooftop.jpg">

	<!-- Teleport. -->
	<img id="img-teleport" src="images/teleport.png">
	<img id="img-amulet-front" src="images/amulet_front.png">
	<img id="img-amulet-back" src="images/amulet_back.png">
	<!-- Character images -->
	<img id="anap-front" src="images/characters/anap_front.png">
	<img id="anao-front" src="images/characters/anao_front.png">
	<img id="coni-front" src="images/characters/coni_front.png">
	<img id="danie-front" src="images/characters/danie_front.png">
	
	<img id="anap-side" src="images/characters/anap_side.png">
	<img id="anao-side" src="images/characters/anao_side.png">
	<img id="coni-side" src="images/characters/coni_side.png">
	<img id="danie-side" src="images/characters/danie_side.png">
	<!-- Character gifs -->
	<img id="gif-coni-walk" src="gifs/coni_walk.gif">

	<img id="khipukamayuq-front" src="images/characters/khipukamayuq_front.png">

	<!-- Background audios. -->
	<audio id="audio-background-scene2" src="audios/background/scene2.mp3"></audio>	
	<audio id="audio-background-scene3" src="audios/background/scene3.mp3"></audio>
	<!-- Sound effects. -->
	<audio id="audio-effect-scene2" src="audios/effects/scene2-door.mp3"></audio>
	<!-- Narrative audios. -->
	<audio id="audio-narrative-scene3" src="audios/narrative/scene3.mp3"></audio>
	<!-- Character audios. -->
	<audio id="audio-khipukamayuq" src="audios/characters/khipukamayuq.mp3"></audio>
      </a-assets>

      <a-camera id="camera" wasd-controls-enabled="true"
		position="0 0 0">
        <a-cursor id="cursor">
          <a-animation begin="click" easing="ease-in"
		       attribute="scale" fill="backwards" from="0.1
		       0.1 0.1" to="1 1 1" dur="150">
	  </a-animation>
          <a-animation begin="cursor-fusing" easing="ease-in"
		       attribute="scale" from="1 1 1" to="0.1 0.1 0.1"
		       dur="1500">
	  </a-animation>
        </a-cursor>
      </a-camera>

      <!-- Intro. -->
      <a-sky id="sky-intro" color="#000"></a-sky>
  
      <a-image src="#img-headphones" opacity="0" position="0 0 -6">
	<a-animation 
	  attribute="opacity" 
	  from="0" 
	  to="1" 
	  dur="5000">
	</a-animation>
	<a-animation 
	  attribute="opacity" 
	  from="1" 
	  to="0" 
	  delay="5000"
	  dur="5000">
	</a-animation>
	<a-animation attribute="visible" delay="10000" to="false"></a-animation>
	<a-animation attribute="rotation"
		     dur="5000"
		     fill="forwards"
		     to="0 360 0" 
		     repeat="2"></a-animation>
      </a-image>

      <a-entity text="value: Ponete auriculares para una mejor experiencia; anchor: center; width: 5; color: white; opacity:0"
		position="0 -1 -6"
		visible="true">
	<a-animation attribute="text.opacity" from="0" to="1" dur="5000">
	</a-animation>
	<a-animation attribute="text.opacity" from="1" to="0" 
		     delay="5000" dur="5000">
	</a-animation>
	<a-animation attribute="visible" delay="10000" to="false"></a-animation>
      </a-entity>

      <a-image src="#img-cardboard" visible="false" opacity="0"  position="0 0 -6">
	<a-animation attribute="visible" delay="10000" to="true"></a-animation>
	<a-animation 
	  attribute="opacity" 
	  from="0" 
	  to="1" 
	  delay="10000"
	  dur="5000">
	</a-animation>
	<a-animation 
	  attribute="opacity" 
	  from="1" 
	  to="0" 
	  delay="15000"
	  dur="5000">
	</a-animation>
	<a-animation attribute="visible" delay="20000" to="false"></a-animation>
	<a-animation attribute="rotation"
		     delay="10000"
		     dur="5000"
		     fill="forwards"
		     to="0 360 0"
		     repeat="3">
	</a-animation>
      </a-image>

      <a-entity text="value: Coloca tu telÃ©fono en el Cardboard; anchor: center; width: 5; color: white; opacity: 0"
		position="0 -1 -6"		
		visible="false">
	<a-animation attribute="visible" delay="10000" to="true"></a-animation>
	<a-animation attribute="text.opacity" from="0" to="1" 
		     delay="10000" dur="5000">
	</a-animation>
	<a-animation attribute="text.opacity" from="1" to="0" 
		     delay="15000" dur="5000">
	</a-animation>
	<a-animation attribute="visible" delay="20000" to="false"></a-animation>
      </a-entity>      

      <a-image src="#img-rotation" visible="false"
	       opacity="0"
	       position="0 0 -6">
	<a-animation attribute="visible" delay="20000" to="true"></a-animation>
	<a-animation 
	  attribute="opacity" 
	  from="0" 
	  to="1" 
	  delay="20000"
	  dur="5000">
	</a-animation>
	<a-animation 
	  attribute="opacity" 
	  from="1" 
	  to="0" 
	  delay="25000"
	  dur="5000">
	</a-animation>
	<a-animation attribute="visible"
		     delay="30000"
		     to="false">
	</a-animation>
	<a-animation attribute="rotation"
		     delay="20000"
		     dur="5000"
		     fill="forwards"
		     to="0 360 0"
		     repeat="3">
	</a-animation>
      </a-image>

      <a-entity text="value: Vas a poder moverte libremente todo el tiempo; anchor: center; width: 5; color: white; opacity: 0"
		position="0 -1 -6"
		visible="false">
	<a-animation attribute="visible" delay="20000" to="true"></a-animation>
	<a-animation attribute="text.opacity" from="0" to="1" 
		     delay="20000" dur="5000">
	</a-animation>
	<a-animation attribute="text.opacity" from="1" to="0" 
		     delay="25000" dur="5000">
	</a-animation>
	<a-animation attribute="visible" delay="30000" to="false"></a-animation>
      </a-entity>

      <a-plane src="#img-intro1" opacity="0" visibility="false" width="5" height="2.8" position="0 2 -3">
	<a-animation attribute="opacity" from="0" to="1" begin="30000" dur="5000">
	</a-animation>
	<a-animation attribute="opacity" from="1" to="0" 
		     begin="35000" dur="5000">
	</a-animation>
	<a-animation attribute="visible" begin="40000" to="false"></a-animation>
      </a-plane>

      <a-plane src="#img-intro2" opacity="0" visibility="false" width="5" height="2.8" position="0 2 -3">
	<a-animation attribute="opacity" from="0" to="1" begin="40000" dur="5000">
	</a-animation>
	<a-animation attribute="opacity" from="1" to="0" 
		     begin="45000" dur="5000">
	</a-animation>
	<a-animation attribute="visible" begin="50000" to="false"></a-animation>
      </a-plane>

      <a-plane src="#img-intro3" opacity="0" visibility="false" width="5" height="2.8" position="0 2 -3">
	<a-animation attribute="opacity" from="0" to="1" begin="50000" dur="5000">
	</a-animation>
	<a-animation attribute="opacity" from="1" to="0" 
		     begin="55000" dur="5000">
	</a-animation>
	<a-animation id="animation-last-intro" attribute="visible" begin="60000" to="false"></a-animation>
      </a-plane>
      
      <!-- Scene 1. -->
      <a-video id="a-video-scene1" src="#video-scene1"
	       width="5" height="2.8" position="0 2 -3"
	       visible="false">
      </a-video>

      <!-- Scene 2. -->
      <a-sky id="sky-medialab" radius="5" src="#img-medialab"
	     rotation="0 -90 0"
	     visible="false">
      </a-sky>
      <a-sound id="sound-background-scene2" src="#audio-background-scene2"
	       autoplay="false"
	       position="-3 -1 5">
	<a-animation attribute="volume"
		     dur="5000" from="1" to="0.1"
		     begin="background-sound-reduce-volume">
	</a-animation>
	<a-animation attribute="volume"
		     dur="5000" from="0.1" to="1"
		     begin="background-sound-raise-volume">
	</a-animation>	
      </a-sound>
      <!-- Characters. -->
      <a-image id="image-anao-scene2" src="#anao-front" position="1 -1 -1.75"
	       height="3" width="1"
	       visible="false">
	<a-animation attribute="position"
		     to="1.85 -1 0"
		     begin="walk"
		     dur="3000">
	</a-animation>
	<a-animation attribute="height"
		     to="3.5"
		     begin="walk"
		     dur="3000">
	</a-animation>
	<a-animation attribute="width"
		     to="1.1"
		     begin="walk"
		     dur="3000">
	</a-animation>
      </a-image>	
      <a-image id="image-anap-scene2" src="#anap-front" position="1.25 -1 -0.75"
	       height="3" width="1"
	       visible="false">
	<a-animation attribute="position"
		     to="0.85 -1 0"
		     begin="walk"
		     dur="3000">
	</a-animation>
	<a-animation attribute="height"
		     to="3.5"
		     begin="walk"
		     dur="3000">
	</a-animation>
	<a-animation attribute="width"
		     to="1.1"
		     begin="walk"
		     dur="3000">
	</a-animation>
      </a-image>
      <a-image id="image-coni-scene2" src="#coni-front" position="-0.75 -1 -1.5"
	       height="3" width="1"
	       visible="false">
	<a-animation attribute="position"
		     to="-0.85 -1 0"
		     begin="walk"
		     dur="3000">
	</a-animation>	  
	<a-animation attribute="height"
		     to="3.5"
		     begin="walk"
		     dur="3000">
	</a-animation>
	<a-animation attribute="width"
		     to="1.1"
		     begin="walk"
		     dur="3000">
	</a-animation>
      </a-image>
      <a-image id="image-danie-scene2" src="#danie-front" position="-2 -1 1"
	       height="3" width="1"
	       visible="false">
	<a-animation attribute="position"
		     to="-1.15 -1 0"
		     begin="walk"
		     dur="3000">
	</a-animation>
	<a-animation attribute="height"
		     to="3.5"
		     begin="walk"
		     dur="3000">
	</a-animation>
	<a-animation attribute="width"
		     to="1.1"
		     begin="walk"
		     dur="3000">
	</a-animation>		  
      </a-image>
      <!-- Teleport. -->
      <a-entity id="teleport-scene2" transparent="true" visible="false">
	<a-image id="image-teleport-scene2" src="#img-teleport"
		 position="3.5 0.5 0"
		 rotation="0 70 0" 
		 opacity="0">
	  <a-animation id="animation-door-delay" attribute="opacity"
		       to="0" dur="3000"
		       begin="start">
	  </a-animation>
	  <a-animation id="animation-door" attribute="opacity"
		       begin="start" delay="3000" dur="3000" to="1">
	  </a-animation>			
	</a-image> 
	<a-sound id="sound-effect-scene2" src="#audio-effect-scene2"
		 autoplay="false">
	</a-sound>
      </a-entity>

      <!--a-entity id="gif-coni-walk" position="1 0 7" geometry="primitive: plane; height: 4; width: 1.5"
		material="shader: gif; src:#gif-coni-walk; transparent: true; autoplay: true"
		visible="true">
	<a-animation attribute="position"
		     to="1 0 11"
		     begin="walk"
		     dur="3000">
	</a-animation>
      </a-entity-->

      <!-- Scene 3. -->
      <a-sky id="sky-rooftop" radius="10" src="#img-rooftop"
	     rotation="0 -95 0"
	     visible="false">
      </a-sky>
      <a-sound id="sound-background-scene3" src="#audio-background-scene3"
	       autoplay="false"
	       position="-3 -1 2">
	<a-animation attribute="volume"
		     dur="3000" from="0" to="1"
		     begin="start"Â¨>
	</a-animation>		
	<a-animation attribute="volume"
		     dur="5000" from="1" to="0.1"
		     begin="background-sound-reduce-volume">
	</a-animation>
	<a-animation attribute="volume"
		     dur="5000" from="0.1" to="1"
		     begin="background-sound-raise-volume">
	</a-animation>	
      </a-sound>
      <!-- Characters. -->
      <a-image id="image-anao-scene3" src="#anao-side" position="2 0 -2"
	       height="3" width="1"
	       rotation="0 -90 0"
	       visible="false">
      </a-image>	
      <a-image id="image-anap-scene3" src="#anap-side" position="2 0 -1"
	       height="3" width="1"
	       rotation="0 -100 0"
	       visible="false">
      </a-image>
      <a-image id="image-coni-scene3" src="#coni-side" position="-2 0 -2"
	       height="3" width="1"
	       rotation="0 -80 0"
	       visible="false">
      </a-image>
      <a-image id="image-danie-scene3" src="#danie-side" position="-2 0 -1"
	       height="3" width="1"
	       rotation="0 -70 0"
	       visible="false">
      </a-image>
      <a-image id="khipukamayuq" src="#khipukamayuq-front" position="0 5 -5"
	       height="3" width="1"
	       opacity="0">
	<a-animation id="animation-khipukamayuq" attribute="opacity"
		     begin="start" delay="5000" dur="5000" to="1">
        </a-animation>	
	<a-animation id="animation-khipukamayuq-delay" attribute="opacity"
		     begin="start" dur="5000" to="0">
        </a-animation>	
	<a-sound id="sound-khipukamayuq" src="#audio-khipukamayuq"
		 autoplay="false">
	</a-sound>
      </a-image>
      <!-- Teleport. -->
      <a-entity id="amulet" position="0 4.5 -4.5"
		scale="0 0 0" rotation="90 0 360"
		visible="true">
	<a-entity geometry="primitive: plane; height: 4; width: 4"
		  material="side: front; src: #img-amulet-front; transparent: true">
	</a-entity>
	<a-entity geometry="primitive: plane; height: 4; width: 4"
		  material="side: back; src: #img-amulet-back; transparent: true">
	</a-entity>
	<a-animation id="amulet-delay" attribute="scale" to="0 0 0"
		     begin="amulet-appears-started" dur="20000">
	</a-animation>
	<a-animation id="amulet-appears" attribute="scale" to="0.2 0.2 0.2"
		     begin="amulet-delay-ended">
	</a-animation>
	<a-animation id="amulet-decends" attribute="position" to="0 1 -1.5"
		     begin="amulet-appears-ended" dur="3000">
	</a-animation>
	<a-animation attribute="rotation" to="180 180 0"
		     begin="amulet-appears-ended" dur="3000">
	</a-animation>
      </a-entity>
      <!-- Narrative. -->
      <a-entity>
	<a-sound id="sound-narrative-scene3" src="#audio-narrative-scene3"
		 autoplay="false">
      </a-entity>
     
    </a-scene>
    
    <script src="scripts/controller.js"></script>    
  </body>
</html>
