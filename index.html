<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Khipu 360</title>
    <script src="https://aframe.io/releases/0.6.1/aframe.min.js"></script>
    <script src="scripts/aframe-gif-shader.js"></script>  
  </head>
  <body>
    <a-scene>
      <a-assets>
	<!-- 360 images. -->
	<img id="image-rooftop" src="images/360/rooftop.jpg">
	<!-- Character images -->
	<img id="anap-side" src="images/characters/anap_side.png">
	<img id="anao-side" src="images/characters/anao_side.png">
	<img id="coni-side" src="images/characters/coni_side.png">
	<img id="danie-side" src="images/characters/danie_side.png">

	<img id="khipukamayuq-front" src="images/characters/khipukamayuq_front.png">
	
	<img id="khipukamayuq-transparent" src="images/khipukamayuq-transparent.png">
	<a-asset-item id="amulet-model" src="models/amulet/amulet_1set.glb"></a-asset-item>
	<!-- Background audios. -->
	<audio id="audio-background-scene3" src="audios/background/scene3.mp3"></audio>
	<!-- Narrative audios. -->
	<audio id="audio-narrative-scene3" src="audios/narrative/scene3.mp3"></audio>
	<!-- Character audios. -->
	<audio id="audio-khipukamayuq" src="audios/characters/khipukamayuq.mp3"></audio>
      </a-assets>

      <a-camera wasd-controls-enabled="true" position="0 0 1">
        <a-cursor id="cursor">
          <a-animation begin="click" easing="ease-in"
		       attribute="scale" fill="backwards" from="0.1
		       0.1 0.1" to="1 1 1" dur="150">
	  </a-animation>
          <a-animation begin="cursor-fusing" easing="ease-in"
		       attribute="scale" from="1 1 1" to="0.1 0.1 0.1"
		       dur="1500">
	  </a-animation>
        </a-cursor>
      </a-camera>
      
      <!-- Scene 3 -->
      <a-sky id="sky-rooftop" radius="10" src="#image-rooftop"
	     rotation="0 -95 0">
      </a-sky>
      <a-sound id="sound-background-scene3" src="#audio-background-scene3"
	       autoplay="true"
	       position="-3 -1 2">
	<a-animation attribute="volume"
		     dur="5000" from="1" to="0.1"
		     begin="background-sound-reduce-volume">
	</a-animation>
	<a-animation attribute="volume"
		     dur="5000" from="0.1" to="1"
		     begin="background-sound-raise-volume">
	</a-animation>	
      </a-sound>
      <!-- Characters -->
      <a-image src="#anao-side" position="2 0 -2"
	       height="3" width="1"
	       rotation="0 -90 0">
      </a-image>	
      <a-image src="#anap-side" position="2 0 -1"
	       height="3" width="1"
	       rotation="0 -100 0">
      </a-image>
      <a-image src="#coni-side" position="-2 0 -2"
	       height="3" width="1"
	       rotation="0 -80 0">
      </a-image>
      <a-image src="#danie-side" position="-2 0 -1"
	       height="3" width="1"
	       rotation="0 -70 0">
      </a-image>
      <a-image src="#khipukamayuq-front" position="0 5 -5"
	       height="3" width="1"
	       opacity="0">
	<a-animation id="animation-khipukamayuq-delay" attribute="opacity"
		     dur="5000" to="0">
        </a-animation>	
	<a-animation id="animation-khipukamayuq" attribute="opacity"
		     begin="5000" dur="5000" to="1">
        </a-animation>
	<a-sound id="sound-khipukamayuq" src="#audio-khipukamayuq"
	</a-sound>
      </a-image>

      
      <!--a-entity sound="src: #audio-narrative-scene3; autoplay: true"></a-entity -->

      
      <!--a-sky id="image-360-2" radius="10" src="#prueba2" opacity="0"></a-sky>
      <a-entity position="-1 0 -4" geometry="primitive: plane; height: 4"
		material="shader: gif; src:url(images/wink_coni2.gif); transparent: true; autoplay: true">  
      </a-entity>
      <a-image src="#khipukamayuq-transparent" height="3" position="-3 0 3" rotation="0 30 0">
	<a-animation id="khipukamayuq-animation" attribute="position"
		     to="-3 1 -5" dur="10000">
	</a-animation>
        <a-entity id="amulet" gltf-model="#amulet-model"
		  position="0 0 0.5" scale="0.2 0.2 0.2" rotation="90 210 180"
		  visible="false">
          <a-animation attribute="visible" to="true"
		       begin="khipukamayuqVisible">
	  </a-animation>
	</a-entity>
      </a-image-->
    </a-scene>
    <script src="scripts/controller.js"></script>    
  </body>
</html>
