!function(t){function e(r){if(i[r])return i[r].exports;var o=i[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){i(1),i(2),i(3)},function(t,e){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("cursor-feedback",{schema:{property:{"default":"scale"},dur:{"default":"300"},to:{"default":"2 2 2"}},multiple:!1,init:function(){this.mouseenter=this.mouseenter.bind(this),this.mouseleave=this.mouseleave.bind(this),this.el.addEventListener("mouseenter",this.mouseenter),this.el.addEventListener("mouseleave",this.mouseleave)},mouseenter:function(t){const e=this.data,i=t.target.states,r=i.indexOf("interactive"),o=t.detail.intersectedEl,n=!!o.dataset.interactive;if(r===-1&&n){i.push("interactive"),t.target.removeAttribute("animation");const a={property:e.property,dur:e.dur,to:e.to};t.target.setAttribute("animation",AFRAME.utils.styleParser.stringify(a))}else if(r>=0&&!n){i.splice(r,1),t.target.removeAttribute("animation");const a={property:e.property,dur:e.dur,to:"1 1 1"};t.target.setAttribute("animation",AFRAME.utils.styleParser.stringify(a))}},mouseleave:function(t){const e=this.data,i=t.target.states,r=i.indexOf("interactive");if(r>=0){i.splice(r,1),t.target.removeAttribute("animation");const o={property:e.property,dur:e.dur,to:"1 1 1"};t.target.setAttribute("animation",AFRAME.utils.styleParser.stringify(o))}},remove:function(){this.el.removeAttribute("animation"),this.el.removeEventListener("mouseenter",this.mouseenter),this.el.removeEventListener("mouseleave",this.mouseleave)}})},function(t,e){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("target-indicator",{schema:{target:{"default":null}},multiple:!1,init:function(){const t=this.data.target,e=document.querySelector(t);if(!t||!e)return void console.warn("The target-indicator component requires a valid target.");const i=this.el,r=new THREE.Frustum,o=document.createElement("a-image");o.setAttribute("src","data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22512%22%20height%3D%22512%22%20viewBox%3D%220%200%20512%20512%22%3E%3Cpath%20d%3D%22M256.333%20428q9%200%2015-6L392%20301.333%20422.333%20271q6-6%206-15t-6-15L392%20210.667%20271.333%2090q-6-6-15-6t-15%206L211%20120.333q-6%206-6%2015t6%2015l63%2063H106.667q-8.667%200-15%206.334-6.334%206.333-6.334%2015v42.666q0%208.667%206.334%2015%206.333%206.334%2015%206.334H274l-63%2063q-6.333%206.333-6.333%2015%200%208.666%206.333%2015L241.333%20422q6%206%2015%206zM256%20512q-69.667%200-128.5-34.333-58.833-34.334-93.167-93.167Q0%20325.667%200%20256t34.333-128.5Q68.667%2068.667%20127.5%2034.333%20186.333%200%20256%200t128.5%2034.333q58.833%2034.334%2093.167%2093.167Q512%20186.333%20512%20256t-34.333%20128.5q-34.334%2058.833-93.167%2093.167Q325.667%20512%20256%20512z%22%2F%3E%3C%2Fsvg%3E"),o.setAttribute("opacity",.5),o.setAttribute("width",.5),o.setAttribute("height",.5),o.setAttribute("position","0 0 -3"),i.appendChild(o),this.camera=i,this.frustum=r,this.arrow=o,this.target=e},remove:function(){this.camera.removeChild(this.arrow)},tick:function(){const t=this.camera.components.camera.camera;t.updateMatrix(),t.updateMatrixWorld(),t.matrixWorldInverse.getInverse(t.matrixWorld),this.frustum.setFromMatrix((new THREE.Matrix4).multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse));const e=this.target.getAttribute("position"),i=this.frustum.containsPoint(new THREE.Vector3(e.x,e.y,e.z));if(i)return void this.arrow.setAttribute("visible","false");this.arrow.setAttribute("visible","true");const r=new THREE.Vector4(e.x,e.y,e.z,1);r.applyMatrix4(t.matrixWorldInverse);var o=Math.atan(r.y/r.x);r.x<0&&(o+=Math.PI),this.arrow.setAttribute("rotation",AFRAME.utils.coordinates.stringify({x:0,y:0,z:THREE.Math.radToDeg(o)}))}})},function(t,e){const i={number:"f",time:"f",vec4:"v4",vec3:"v3",vec2:"v2",color:"v3"};AFRAME.registerShader("volumetric-light",{schema:{attenuation:{type:"number","default":5,is:"uniform"},anglePower:{type:"number","default":1.2,is:"uniform"},spotPosition:{type:"vec3","default":"0 0 0",is:"uniform"},lightColor:{type:"vec3","default":"1 1 1",is:"uniform"}},init:function(t){this.uniforms=this.initVariables(t,"uniform"),this.material=new THREE.ShaderMaterial({uniforms:this.uniforms,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader,transparent:!0,depthWrite:!1})},initVariables:function(t,e){function r(r){if(a[r].is===e){var s=i[a[r].type],l=a[r].parse(t[r]||a[r]["default"]);n[r]={type:s,value:o.parseValue(a[r].type,l)}}}var o=this,n={},a=this.schema,s=Object.keys(a);return s.forEach(r),n},vertexShader:["varying vec3 vNormal;","varying vec3 vWorldPosition;","void main(){","vNormal\t\t= normalize( normalMatrix * normal );","vec4 worldPosition\t= modelMatrix * vec4( position, 1.0 );","vWorldPosition\t\t= worldPosition.xyz;","gl_Position\t= projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["varying vec3\t\tvNormal;","varying vec3\t\tvWorldPosition;","uniform vec3\t\tlightColor;","uniform vec3\t\tspotPosition;","uniform float\t\tattenuation;","uniform float\t\tanglePower;","void main(){","float intensity;","intensity\t= distance(vWorldPosition, spotPosition)/attenuation;","intensity\t= 1.0 - clamp(intensity, 0.0, 1.0);","vec3 normal\t= vec3(vNormal.x, vNormal.y, abs(vNormal.z));","float angleIntensity\t= pow( dot(normal, vec3(0.0, 0.0, 1.0)), anglePower );","intensity\t= intensity * angleIntensity;","gl_FragColor\t= vec4( lightColor, intensity );","}"].join("\n")})}]);